@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema: <http://schema.org/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

@prefix datacite: <http://purl.org/spar/datacite/> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix doco: <http://purl.org/spar/doco/> .
@prefix fabio: <http://purl.org/spar/fabio/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix frbr: <http://purl.org/vocab/frbr/core#> .
@prefix literal: <http://www.essepuntato.it/2010/06/literalreification/> .
@prefix oco: <https://w3id.org/oc/ontology/> .
@prefix prism: <http://prismstandard.org/namespaces/basic/2.0/> .
@prefix pro: <http://purl.org/spar/pro/> .

schema:IdentifierShape
  a sh:NodeShape ;
  sh:targetClass datacite:Identifier ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue datacite:Identifier ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path literal:hasLiteralValue ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path datacite:usesIdentifierScheme ;
    sh:in (
      datacite:oci datacite:doi datacite:pmid datacite:pmcid datacite:orcid
      datacite:local-resource-identifier-scheme datacite:intrepid datacite:isbn
      datacite:issn datacite:url datacite:viaf datacite:crossref datacite:datacite
      datacite:wikidata datacite:wikipedia datacite:openalex datacite:jid      
    ) ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path [sh:inversePath datacite:hasIdentifier] ;
    sh:or (
      [ sh:node schema:BibliographicResourceShape ]
      [ sh:node schema:ResponsibleAgentShape ]
    ) ;
  ] .

schema:JournalArticleIdentifierShape
  a sh:NodeShape ;
  sh:targetClass datacite:Identifier ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue datacite:Identifier ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path literal:hasLiteralValue ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path datacite:usesIdentifierScheme ;
    sh:in (
      datacite:doi
      datacite:pmid
      datacite:pmcid
      datacite:openalex
    ) ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .

schema:JournalIdentifierShape
  a sh:NodeShape ;
  sh:targetClass datacite:Identifier ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue datacite:Identifier ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path literal:hasLiteralValue ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path datacite:usesIdentifierScheme ;
    sh:in (
      datacite:doi 
      datacite:issn 
      datacite:url
      datacite:openalex
      datacite:jid      
    ) ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path [sh:inversePath datacite:hasIdentifier] ;
    sh:node schema:JournalShape ;
  ] .

schema:BookIdentifierShape
  a sh:NodeShape ;
  sh:targetClass datacite:Identifier ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue datacite:Identifier ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path literal:hasLiteralValue ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path datacite:usesIdentifierScheme ;
    sh:in (
      datacite:doi datacite:pmid datacite:pmcid datacite:isbn
      datacite:url datacite:openalex     
    ) ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path [sh:inversePath datacite:hasIdentifier] ;
    sh:or schema:BookShape ;
  ] .

schema:AgentIdentifierShape
  a sh:NodeShape ;
  sh:targetClass datacite:Identifier ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue datacite:Identifier ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path literal:hasLiteralValue ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path datacite:usesIdentifierScheme ;
    sh:in (
      datacite:orcid
      datacite:viaf 
      datacite:crossref
      datacite:wikidata 
      datacite:wikipedia
      datacite:ror 
    ) ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .

schema:AgentRoleShape
  a sh:NodeShape ;
  sh:targetClass pro:RoleInTime ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue pro:RoleInTime ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path oco:hasNext ;
    sh:node schema:AgentRoleShape ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path pro:isHeldBy ;
    sh:node schema:ResponsibleAgentShape ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path pro:withRole ;
    sh:in (pro:publisher pro:author pro:editor) ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path [sh:inversePath oco:hasNext] ;
    sh:node schema:AgentRoleShape ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path [sh:inversePath pro:isDocumentContextFor] ;
    sh:node schema:BibliographicResourceShape ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] .

schema:JournalArticleShape
  a sh:NodeShape ;
  sh:targetClass fabio:JournalArticle ;
  sh:property [
    sh:path datacite:hasIdentifier ;
    sh:node schema:JournalArticleIdentifierShape ;
  ] ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue fabio:Expression ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue fabio:JournalArticle ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path dcterms:title ;
    sh:datatype xsd:string ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path frbr:partOf ;
    sh:node schema:IssueShape ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path prism:publicationDate ;
    sh:or (
      [ sh:datatype xsd:date ]
      [ sh:datatype xsd:gYearMonth ]
      [ sh:datatype xsd:gYear ]
    ) ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path frbr:embodiment ;
    sh:node schema:ResourceEmbodimentShape ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path pro:isDocumentContextFor ;
    sh:node schema:AuthorShape ;
    sh:minCount 0 ;
  ] ;
  sh:property [
    sh:path pro:isDocumentContextFor ;
    sh:node schema:EditorShape ;
    sh:minCount 0 ;
  ] ;
  sh:property [
    sh:path pro:isDocumentContextFor ;
    sh:node schema:PublisherShape ;
    sh:minCount 0 ;
  ] .

schema:BookShape
  a sh:NodeShape ;
  sh:targetClass fabio:Book ;
  sh:property [
    sh:path datacite:hasIdentifier ;
    sh:node schema:BookIdentifierShape ;
  ] ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue fabio:Expression ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue fabio:Book ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path dcterms:title ;
    sh:datatype xsd:string ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  # sh:property [
  #   sh:path frbr:partOf ;
  #   sh:node schema:BibliographicResourceShape ;
  #   sh:minCount 0 ;
  #   sh:maxCount 1 ;
  # ] ;
  sh:property [
    sh:path prism:publicationDate ;
    sh:or (
      [ sh:datatype xsd:date ]
      [ sh:datatype xsd:gYearMonth ]
      [ sh:datatype xsd:gYear ]
    ) ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  # sh:property [
  #   sh:path frbr:embodiment ;
  #   sh:node schema:ResourceEmbodimentShape ;
  #   sh:minCount 0 ;
  #   sh:maxCount 1 ;
  # ] ;
  sh:property [
    sh:path pro:isDocumentContextFor ;
    sh:node schema:AgentRoleShape ;
  ] .

schema:AuthorShape
  a sh:NodeShape ;
  sh:targetClass pro:RoleInTime ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue pro:RoleInTime ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path pro:withRole ;
    sh:hasValue pro:author ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path pro:isHeldBy ;
    sh:node schema:PersonShape ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path oco:hasNext ;
    sh:node schema:AuthorShape ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] .

schema:EditorShape
  a sh:NodeShape ;
  sh:targetClass pro:RoleInTime ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue pro:RoleInTime ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path pro:withRole ;
    sh:hasValue pro:editor ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path pro:isHeldBy ;
    sh:node schema:PersonShape ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path oco:hasNext ;
    sh:node schema:EditorShape ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] .

schema:PublisherShape
  a sh:NodeShape ;
  sh:targetClass pro:RoleInTime ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue pro:RoleInTime ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path pro:withRole ;
    sh:hasValue pro:publisher ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path pro:isHeldBy ;
    sh:node schema:OrganizationShape ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path oco:hasNext ;
    sh:node schema:PublisherShape ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] .

schema:PersonShape
  a sh:NodeShape ;
  sh:targetClass foaf:Person ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue foaf:Person ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path foaf:givenName ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path foaf:familyName ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .

schema:OrganizationShape
  a sh:NodeShape ;
  sh:targetClass foaf:Organization ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue foaf:Organization ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path foaf:name ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .

schema:JournalShape
  a sh:NodeShape ;
  sh:targetClass fabio:Journal ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue fabio:Journal ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path datacite:hasIdentifier ;
    sh:node schema:JournalIdentifierShape ;
  ] ;
  sh:property [
    sh:path dcterms:title ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .

schema:VolumeShape
  a sh:NodeShape ;
  sh:targetClass fabio:JournalVolume ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue fabio:JournalVolume ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path fabio:hasSequenceIdentifier ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path frbr:partOf ;
    sh:node schema:JournalShape ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .

schema:IssueShape
  a sh:NodeShape ;
  sh:targetClass fabio:JournalIssue ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue fabio:JournalIssue ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path fabio:hasSequenceIdentifier ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path frbr:partOf ;
    sh:node schema:VolumeShape ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .

schema:ResourceEmbodimentShape
  a sh:NodeShape ;
  sh:targetClass fabio:Manifestation ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue fabio:Manifestation ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path prism:startingPage ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path prism:endingPage ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path [sh:inversePath frbr:embodiment] ;
    sh:node schema:BibliographicResourceShape ;
  ] .

schema:ResponsibleAgentShape
  a sh:NodeShape ;
  sh:targetClass foaf:Agent ;
  sh:property [
    sh:path datacite:hasIdentifier ;
    sh:node schema:AgentIdentifierShape ;
  ] ;
  sh:property [
    sh:path rdf:type ;
    sh:hasValue foaf:Agent ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path foaf:name ;
    sh:datatype xsd:string ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path foaf:givenName ;
    sh:datatype xsd:string ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path foaf:familyName ;
    sh:datatype xsd:string ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path [sh:inversePath pro:isHeldBy] ;
    sh:node schema:AgentRoleShape ;
  ] .